<!DOCTYPE html>
<html style="height: 100%">
<head>
    <title>dtube</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            height: 100vh;
            background: #0a192f;
            font-family: 'Roboto', sans-serif;
            transition: cursor 0.3s;
        }

        body.inactive {
            cursor: none;
        }

        #videoContainer {
            height: 100vh;
            position: relative;
            background: #000;
        }

        #videoPlayer {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .controls {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(10, 25, 47, 0.95));
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }

        #videoContainer:hover .controls:not(.force-hidden) {
            transform: translateY(0);
        }

        body.inactive #videoContainer .controls {
            transform: translateY(100%) !important;
        }

        .button {
            background: rgba(26, 54, 90, 0.9);
            border: none;
            color: #fff;
            padding: 12px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .button:hover {
            background: #3b82f6;
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .progress {
            flex-grow: 1;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .progress-filled {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #60a5fa);
            border-radius: 3px;
            width: 0%;
            transition: width 0.1s linear;
        }

        .volume-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .volume-slider {
            width: 100px;
            height: 5px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            background: #3b82f6;
            border-radius: 50%;
            cursor: pointer;
        }

        .fullscreen-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 999;
        }

        .loading-spinner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            border: 4px solid rgba(59, 130, 246, 0.2);
            border-top-color: #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: none;
        }

        @keyframes spin {
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        #preloadVideo {
            display: none;
        }
    </style>
</head>
<body>
    <div class="loading-spinner" id="spinner"></div>
    <div class="fullscreen-overlay" id="overlay">
        <button class="button" style="font-size: 24px">‚Üó</button>
    </div>

    <div id="videoContainer">
        <video id="videoPlayer"></video>
        <video id="preloadVideo"></video>
        <div class="controls">
            <button class="button" id="playBtn">‚ñ∂</button>
            <button class="button" id="nextBtn">‚è≠</button>
            <div class="progress">
                <div class="progress-filled"></div>
            </div>
            <div class="volume-container">
                <button class="button" id="muteBtn">üîä</button>
                <input type="range" class="volume-slider" min="0" max="1" step="0.1" value="1">
            </div>
            <button class="button" id="fullscreenBtn">‚õ∂</button>
        </div>
    </div>

    <script>
        const videoSources = shuffleArray([
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeigtfhi5ws6lrveafsnwsryzwundiqal3iiwpo3ytmoxgv5hsp7mou",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeic7y4a4334bvkj4qjzx7gjodlkca33kfycvr7esicm23efroidgfu",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeidcjv6gk54s77rnocd3evbxdm26p2cyolhihpqxp366oj2ztaeltq",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeicprruiaudtfmg4kg2zcr45776x5da77zv73owooppw3o2ctfdt5e",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeidl2t566mip6tsmx2lbfxiydbvcdglq5qnkpdvrkje2uqxyf6rjom",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeibvmhfd4mnnyqv2zf3l22wndpzrgoficslxxtktmhdpbtzq72wm3u",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeicqxewkc5btmz44bdc6spe3s4yrfpjzuhbga2y6vydnsib4z3lsgq",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeiboxgm6xlz5arh6lhzbpowc6gtscshrwsnj6dkrffzuqpk7n3an4q",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeieadukgtpiyyo46xje34hmd3k4nyqphihi3uuvntrkvjjliqbixze",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeicwq3gxtay7xgc7dxfd3oda5o6ypebyrrav5sm7w4blqt5pdl4fbi",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeidcpcb3ksqsomth3dyumfa6umdhye7cre75sn6jl2fyba5tymapl4",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeichqv6feek6txormpcxenwnsnv3gswohyp3zc4zlrnyxg5bavnmim",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeigm5vud4d6jvsma2kgcgw3phjoimvrwdyisjoxezh4qj7kff2vf24",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeid6hz6f3yokuzo3cdotvck4d43avol3pfw3wccx6bzprpch5hvvwu",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeidkpopiwmpxkilx4llay354dpqdndqzv7pzc6oyffziolskdfftfm",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeifrh25cck2yue5yeesdzqlfh3p7mz7e7vkvfini5vdjtjosq7epxi",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeigqvv5fjoi2jpyvhpxzqcuadd2fpqio56sukmcckig6di2tg7rv7q",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeifkoazphnc4fzeaf6b6wnhbvuscsbvj54tn5h565alhm2mjdtedii",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeicqw4jgftp3rnmke2ixvb3auukeaauymj6y3g4b552sxvvf6adygm",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeie2y67hpmxoxpxkdez3veezjj6rchn4vi5ckoy7ngysn34w3h34w4",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeiczqttpr664lwktlcmrzvwr6oeemwn5howixjxynkorapjw7t7jze",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeidcddfku264l3gqb4sdi3qwyrbrwulzg5qpbpvfpslbkyqwl5p2yy",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeihiwcl42ukgcn3e3pszu46da2fbnn2xatyjqofyyeahfgu362wysq",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeia7kqdwptsbetoj4gy5a73lohyuokudurijzmarq247uzveiegenu",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeigdpqir5ehfqyuhmctcwkxoqchhbbrrgp6aj76pb3y7b2ot4mm4dq",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeihb27cory76wmbm3n5gwuu2yiluyuuhpomot54gsfdszewix7eycm",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeibob3v7y7aiuzksield65oybwtvhraorte34i5hqknmkdoxv4klae",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeigdqsp2qfsf7cmhqjw72qt4wjrhr5irp637wyeiyd3jp75uyeq6ey",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeihjurlpa2ztfy7cia6fxr7cj225rojhxapuj2rtvkruot7skabymy",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeidcs2frwxv2h2wpv526iibe3vlbm2wo7fvjzqpm5o3oq32hkqlwte",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeid4yjs2hx7gjgottu4gktznbbwgqixa7yve7epdrqxro6g7qig2gm",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeihsi46l5f7pfqgrj4ldmm6nqjjfmx4ryg4pq6ornzibsgscpqtjau",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeickclgl4lf2rc226ah4ltnweobtvzhhndl6y5lte2ibvcukwdigfm",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeiauuuk26dbi6hp3grb7xinajiwbwrlxhxh6pgg76bygewfiix7gka",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeigcltvclgdajfbrjps2e5fuidwaepkfoaj2zze4emxqc7q4k5xjq4",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeiavkrub4h54vpnpqzgnakg4g3zxgfo6x4iadbdn5ul3mqu6pb3dfq",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeidub3ahszzceoxq4ydfzpmip4dbr32wdjdeoqwycal6d4ax4dcg44",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeifxq3rr5fsry3dqw2new6465nuhrjtcpmcas7yqulcfjfighrhfui",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeibg5232wh75aff7sqm7r4pkqgubesashdq5ierjjd456hoeqqsylm",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeibe4u7xzc7ltnjn5bqiriz3u54gy7j6f5b66tcg67skzfiwdsvufq",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeigikt24xsc7dvi4l2bhpyyzp7beitfn5d7xcs4xqhzltd2tizdtii",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeihiacefc456xut4zbcnbncgv4zbtxcohesyhncqdq3hkvxtxoe7ue",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeie3gpjxt7pwwd4n4vysk2b74mgjiinkq32l5g72o7gtd3kujsldnq",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeiedhvvpmqsknq4gxnfpa5rpiwpvrbwvb5jpgg3lfvhctqber5zzvi",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeidopjeyl2dh2ykgjtrpqnxtksqdjvxsaj6f6rhegnzmr6pmkg74ui",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeiboporsnuqxthnwzswvmaiisxbkfikzpop7cxd4awh3atgmk7qanm",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeiev2bvq4szisjwdnij7oecjfrb3zl4mozuwqublbmd3fmm7t5qzo4",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeiewukkgddr5ty2qe3tv2utvh2btncow3ur44uzsejbfysdamgurt4",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeif57zyt7hiljwx3amiwrcjdrv4sfqnp7bzjvmqnnz74z5pfymmztm",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeig4qr5hb46y6zfzqm35sfrqna3yqff3krgnlkobzhorbdbu2y5ome",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeifi6ffxdfm5rhd64d3ithx3jyvo6oqckcwizx47adz7rehe4faa6i",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeicpbxg7x4p5kpjgiiviaz6ydmiczrtzp65t6e5qygpvzfqgqe72iy",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeidg5tlc7huftdbs6bzc3hudrfhye4emg4ynijusymu7priwxjjtiy",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeih2yd4mixfhetkgdscfyeywmxg5bwr2wcgwkse3mbvorozhpao6em",
            "https://ipfs.xn--vck1b.shop/ipfs/bafybeifwq4kyid4lsrxzf3qjmeq6rpbkcrxwkxtujwdb4cabudedzknvbq"
        ]);

        const video = document.getElementById('videoPlayer');
        const preloadVideo = document.getElementById('preloadVideo');
        let currentVideoIndex = -1;
        let isLoading = false;
        let inactivityTimer;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function preloadNextVideo() {
            if (isLoading) return;
            const nextIndex = (currentVideoIndex + 1) % videoSources.length;
            preloadVideo.src = videoSources[nextIndex];
            preloadVideo.load();
        }

        async function loadNextVideo() {
            try {
                isLoading = true;
                document.getElementById('spinner').style.display = 'block';
                video.pause();

                const nextIndex = (currentVideoIndex + 1) % videoSources.length;
                
                if (preloadVideo.src === videoSources[nextIndex] && preloadVideo.readyState >= 3) {
                    video.src = preloadVideo.src;
                    currentVideoIndex = nextIndex;
                    preloadNextVideo();
                } else {
                    currentVideoIndex = nextIndex;
                    video.src = videoSources[currentVideoIndex];
                    preloadNextVideo();
                }

                await video.play();
            } catch (error) {
                console.error('Error loading video:', error);
                loadNextVideo();
            } finally {
                isLoading = false;
                document.getElementById('spinner').style.display = 'none';
            }
        }

        function resetInactivityTimer() {
            clearTimeout(inactivityTimer);
            document.body.classList.remove('inactive');
            inactivityTimer = setTimeout(() => {
                document.body.classList.add('inactive');
            }, 3000);
        }

        // Initial setup
        resetInactivityTimer();
        document.addEventListener('mousemove', resetInactivityTimer);
        document.addEventListener('mousedown', resetInactivityTimer);
        document.addEventListener('keydown', resetInactivityTimer);

        video.addEventListener('ended', loadNextVideo);
        video.addEventListener('waiting', () => {
            document.getElementById('spinner').style.display = 'block';
        });
        video.addEventListener('canplay', () => {
            document.getElementById('spinner').style.display = 'none';
        });

        video.addEventListener('error', () => {
            if (video.error.code === video.error.MEDIA_ERR_SRC_NOT_SUPPORTED) {
                loadNextVideo();
            }
        });

        document.getElementById('playBtn').addEventListener('click', () => {
            video.paused ? video.play() : video.pause();
            resetInactivityTimer();
        });

        document.getElementById('nextBtn').addEventListener('click', () => {
            loadNextVideo();
            resetInactivityTimer();
        });

        document.getElementById('muteBtn').addEventListener('click', () => {
            video.muted = !video.muted;
            document.getElementById('muteBtn').textContent = video.muted ? 'üîá' : 'üîä';
            resetInactivityTimer();
        });

        document.querySelector('.volume-slider').addEventListener('input', (e) => {
            video.volume = e.target.value;
            resetInactivityTimer();
        });

        document.getElementById('fullscreenBtn').addEventListener('click', () => {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
            resetInactivityTimer();
        });

        let lastUpdate = 0;
        video.addEventListener('timeupdate', () => {
            const now = Date.now();
            if (now - lastUpdate > 100) {
                const progress = (video.currentTime / video.duration) * 100;
                document.querySelector('.progress-filled').style.width = `${progress}%`;
                lastUpdate = now;
            }
        });

        document.querySelector('.progress').addEventListener('click', (e) => {
            const rect = e.target.getBoundingClientRect();
            const pos = (e.clientX - rect.left) / rect.width;
            video.currentTime = pos * video.duration;
            resetInactivityTimer();
        });

        document.getElementById('overlay').addEventListener('click', () => {
            video.play();
            document.getElementById('overlay').style.display = 'none';
            resetInactivityTimer();
        });
    </script>
</body>
</html>